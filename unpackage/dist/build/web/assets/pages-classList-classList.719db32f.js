var e,t;import{o as s,c as a,w as l,d as n,F as i,e as u,p as o,v as r,r as d,i as y,x as c,b as p,s as m,y as h,a as f,q as g,j as v,u as k,f as _,g as x}from"./index-fbe593d9.js";import{m as C,a as $}from"./mixin.e7eec79f.js";import{_ as j,g as L,h as w,i as b,j as E,o as A,b as B,k as S,r as q}from"./apis.a6cdb8ad.js";import{_ as z}from"./uni-load-more.4d536dde.js";import{a as F}from"./common.47378ef5.js";const I=j({name:"uv-skeletons",mixins:[C,$],props:{loading:{type:Boolean,default:!0},skeleton:{type:Array,default:()=>[]},animate:{type:Boolean,default:!0},round:{type:Boolean,default:!1},...null==(t=null==(e=uni.$uv)?void 0:e.props)?void 0:t.skeleton},data:()=>({elements:[],opacity:.5,duration:600}),computed:{animateClass(){return this.animate?"uv-skeleton--animation":"uv-skeleton--static"},roundClass(){return this.round?"uv-skeleton--round":"uv-skeleton--radius"},style(e){return e=>this.$uv.deepMerge({},this.$uv.addStyle(e.style))}},created(){this.init()},methods:{init(){let e=[];if(!this.$uv.test.array(this.skeleton))return this.$uv.error("skeleton参数必须为数组形式，参考文档示例：");this.skeleton.forEach((t=>{const s=this.getElCounts(t);e=e.concat(s)})),this.elements=[...e]},getElCounts(e){let t=[],s=[];if(this.$uv.test.number(e))return t.push({type:"gap",height:e}),t;{const a=e.type?e.type:"line",l=e.num?e.num:1,n=e.style?e.style:{},i=this.$uv.test.array(n),u=e.gap?e.gap:"20rpx",o=e.children?e.children:[];for(let e=0;e<o.length;e++)s[e]={clas:o[e].type.indexOf("avatar")>-1||o[e].type.indexOf("custom")>-1?"":"uv-skeleton__group__sub",elements:this.getElCounts(o[e])};for(let e=0;e<l;e++)u&&e<l&&e>0&&t.push({type:"gap",height:u}),t.push({clas:`uv-skeleton__${a}`,type:a,style:i?n[e]:n,gap:u,children:s});return t}},createAnimation(e=1){if(!this.loading||!this.animate)return;let t=0;const s=this.$refs.skeleton;s.forEach((a=>{animation.transition(a,{styles:{opacity:e},duration:this.duration},(()=>{t++,t>=s.length&&setTimeout((()=>{this.createAnimation(e<1?1:this.opacity)}),200)}))}))}}},[["render",function(e,t,c,p,m,h){const f=y;return s(),a(f,{class:"uv-skeleton"},{default:l((()=>[c.loading?(s(),a(f,{key:0},{default:l((()=>[(s(!0),n(i,null,u(m.elements,((t,d)=>(s(),a(f,{key:d},{default:l((()=>["flex"==t.type?(s(),a(f,{key:0,class:"uv-skeleton__group",style:o([h.style(t)])},{default:l((()=>[(s(!0),n(i,null,u(t.children,((t,d)=>(s(),a(f,{class:r([t.clas]),style:o([h.style(t)]),key:d},{default:l((()=>[(s(!0),n(i,null,u(t.elements,((t,n)=>(s(),a(f,{key:n},{default:l((()=>["gap"==t.type?(s(),a(f,{key:0,style:o({height:e.$uv.addUnit(t.height,"rpx")})},null,8,["style"])):(s(),a(f,{key:1,class:r([t.clas,h.roundClass,h.animateClass]),style:o([h.style(t)]),ref_for:!0,ref:"skeleton"},null,8,["class","style"]))])),_:2},1024)))),128))])),_:2},1032,["class","style"])))),128))])),_:2},1032,["style"])):"custom"==t.type?(s(),a(f,{key:1,class:r([t.clas,h.animateClass]),style:o([h.style(t)]),ref_for:!0,ref:"skeleton"},null,8,["class","style"])):"gap"==t.type?(s(),a(f,{key:2,style:o({height:e.$uv.addUnit(t.height,"rpx")})},null,8,["style"])):(s(),a(f,{key:3,class:r([t.clas,h.roundClass,h.animateClass]),style:o([h.style(t)]),ref_for:!0,ref:"skeleton"},null,8,["class","style"]))])),_:2},1024)))),128))])),_:1})):(s(),a(f,{key:1},{default:l((()=>[d(e.$slots,"default",{},void 0,!0)])),_:3}))])),_:3})}],["__scopeId","data-v-cf4a5463"]]),M=j({__name:"classList",setup(e){let t,o={pageNum:1,pageSize:12};L((e=>{let{id:s=null,name:a=null,type:l=null}=e;l&&(o.type=l),s&&(o.classid=s),s||F(),t=a,c({title:t}),C()})),w((()=>{d.value||(o.pageNum++,C())}));const r=p([]),d=p(!1),C=async()=>{let e;o.classid&&(e=await b(o)),o.type&&(e=await E(o)),o.pageSize>e.data.length&&(d.value=!0),r.value=[...r.value,...e.data],m("strogClassList",r.value)};let $=p(!0),j=p(!0),M=p([{type:"custom",style:"width:240rpx;height:400rpx;"}]);return A((e=>({title:"多鱼壁纸-"+t,path:"pages/classList/classList?id="+o.classid+"&name="+t}))),B((e=>({title:"多鱼壁纸-"+t,query:"id="+o.classid+"&name="+t}))),S((()=>{h("strogClassList")})),(e,t)=>{const o=q(v("uv-skeletons"),I),c=_,p=x,m=y,h=q(v("uni-load-more"),z);return s(),a(m,{class:"classList"},{default:l((()=>[f(m,{class:"content"},{default:l((()=>[r.value.length||d.value?g("",!0):(s(),n(i,{key:0},u(12,(t=>f(o,{key:e.index,loading:k($),skeleton:k(M),animate:k(j)},null,8,["loading","skeleton","animate"]))),64)),(s(!0),n(i,null,u(r.value,(e=>(s(),a(p,{url:"/pages/preView/preView?id="+e._id,key:e._id,class:"item"},{default:l((()=>[f(c,{src:e.smallPicurl,mode:"aspectFill"},null,8,["src"])])),_:2},1032,["url"])))),128))])),_:1}),r.value.length||d.value?(s(),a(m,{key:0,class:"loadingLayout"},{default:l((()=>[f(h,{status:d.value?"noMore":"loading"},null,8,["status"])])),_:1})):g("",!0),f(m,{class:"safe-area-inset-bottom"})])),_:1})}}},[["__scopeId","data-v-4d445413"]]);export{M as default};
