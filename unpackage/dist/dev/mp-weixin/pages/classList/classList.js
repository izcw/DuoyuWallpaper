"use strict";const e=require("../../common/vendor.js"),p=require("../../api/apis.js"),f=require("../../utils/common.js");require("../../utils/request.js");if(!Array){const u=e.resolveComponent("uv-skeletons"),a=e.resolveComponent("uni-load-more");(u+a)()}const y=()=>"../../uni_modules/uv-skeletons/components/uv-skeletons/uv-skeletons.js",h=()=>"../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js";Math||(y+h)();const _={__name:"classList",setup(u){let a={pageNum:1,pageSize:12},o;e.onLoad(s=>{let{id:i=null,name:l=null,type:r=null}=s;r&&(a.type=r),i&&(a.classid=i),i||f.gotoHome(),o=l,e.index.setNavigationBarTitle({title:o}),c()}),e.onReachBottom(()=>{n.value||(a.pageNum++,c())});const t=e.ref([]),n=e.ref(!1),c=async()=>{let s;a.classid&&(s=await p.apiGetClassList(a)),a.type&&(s=await p.apiUserWallList(a)),a.pageSize>s.data.length&&(n.value=!0),t.value=[...t.value,...s.data],e.index.setStorageSync("strogClassList",t.value)};let d=e.ref(!0),g=e.ref(!0),v=e.ref([{type:"custom",style:"width:240rpx;height:400rpx;"}]);return e.onShareAppMessage(s=>({title:"多鱼壁纸-"+o,path:"pages/classList/classList?id="+a.classid+"&name="+o})),e.onShareTimeline(s=>({title:"多鱼壁纸-"+o,query:"id="+a.classid+"&name="+o})),e.onUnload(()=>{e.index.removeStorageSync("strogClassList")}),(s,i)=>e.e({a:!t.value.length&&!n.value},!t.value.length&&!n.value?{b:e.f(12,(l,r,m)=>({a:"104357ab-0-"+m})),c:s.index,d:e.p({loading:e.unref(d),skeleton:e.unref(v),animate:e.unref(g)})}:{},{e:e.f(t.value,(l,r,m)=>({a:l.smallPicurl,b:"/pages/preView/preView?id="+l._id,c:l._id})),f:t.value.length||n.value},t.value.length||n.value?{g:e.p({status:n.value?"noMore":"loading"})}:{})}},k=e._export_sfc(_,[["__scopeId","data-v-104357ab"],["__file","/Users/izcw/Desktop/我的项目/DuoyuWallpaper/pages/classList/classList.vue"]]);_.__runtimeHooks=6;wx.createPage(k);
