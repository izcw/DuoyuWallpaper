"use strict";const e=require("../../common/vendor.js"),m=require("../../api/apis.js");require("../../utils/request.js");if(!Array){const u=e.resolveComponent("uv-skeletons"),a=e.resolveComponent("uni-load-more");(u+a)()}const f=()=>"../../uni_modules/uv-skeletons/components/uv-skeletons/uv-skeletons.js",y=()=>"../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js";Math||(f+y)();const _={__name:"classList",setup(u){let a={pageNum:1,pageSize:12},n;e.onLoad(s=>{let{id:r=null,name:o=null,type:i=null}=s;i&&(a.type=i),r&&(a.classid=r),n=o,e.index.setNavigationBarTitle({title:n}),c()}),e.onReachBottom(()=>{l.value||(a.pageNum++,c())});const t=e.ref([]),l=e.ref(!1),c=async()=>{let s;a.classid&&(s=await m.apiGetClassList(a)),a.type&&(s=await m.apiUserWallList(a)),a.pageSize>s.data.length&&(l.value=!0),t.value=[...t.value,...s.data],e.index.setStorageSync("strogClassList",t.value)};let d=e.ref(!0),g=e.ref(!0),v=e.ref([{type:"custom",style:"width:240rpx;height:400rpx;"}]);return e.onShareAppMessage(s=>({title:"多鱼壁纸-"+n,path:"pages/classList/classList?id="+a.classid+"&name="+n})),e.onShareTimeline(s=>({title:"多鱼壁纸-"+n,query:"id="+a.classid+"&name="+n})),e.onUnload(()=>{e.index.removeStorageSync("strogClassList")}),(s,r)=>e.e({a:!t.value.length&&!l.value},!t.value.length&&!l.value?{b:e.f(12,(o,i,p)=>({a:"104357ab-0-"+p})),c:s.index,d:e.p({loading:e.unref(d),skeleton:e.unref(v),animate:e.unref(g)})}:{},{e:e.f(t.value,(o,i,p)=>({a:o.smallPicurl,b:"/pages/preView/preView?id="+o._id,c:o._id})),f:t.value.length||l.value},t.value.length||l.value?{g:e.p({status:l.value?"noMore":"loading"})}:{})}},h=e._export_sfc(_,[["__scopeId","data-v-104357ab"],["__file","/Users/izcw/Desktop/我的项目/DuoyuWallpaper/pages/classList/classList.vue"]]);_.__runtimeHooks=6;wx.createPage(h);
