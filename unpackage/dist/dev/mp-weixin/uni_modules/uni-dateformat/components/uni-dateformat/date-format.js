"use strict";function o(e,s=2){for(e+="";e.length<s;)e="0"+e;return e.slice(-s)}const S={yyyy:e=>o(e.year,4),yy:e=>o(e.year),MM:e=>o(e.month),M:e=>e.month,dd:e=>o(e.day),d:e=>e.day,hh:e=>o(e.hour),h:e=>e.hour,mm:e=>o(e.minute),m:e=>e.minute,ss:e=>o(e.second),s:e=>e.second,SSS:e=>o(e.millisecond,3),S:e=>e.millisecond};function w(e){if(e instanceof Date)return e;switch(typeof e){case"string":return e.indexOf("T")>-1?new Date(e):new Date(e.replace(/-/g,"/"));default:return new Date(e)}}function D(e,s="yyyy/MM/dd hh:mm:ss"){if(!e&&e!==0)return"";e=w(e);const l={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()},i=/yyyy|yy|MM|M|dd|d|hh|h|mm|m|ss|s|SSS|SS|S/;let u=!0,t=s;for(;u;)u=!1,t=t.replace(i,function(c){return u=!0,S[c](l)});return t}function b(e,{locale:s="zh",threshold:l=[6e4,36e5],format:i="yyyy/MM/dd hh:mm:ss"}){if(e==="-")return e;if(!e&&e!==0)return"";const u={zh:{year:"年",month:"月",day:"天",hour:"小时",minute:"分钟",second:"秒",ago:"前",later:"后",justNow:"刚刚",soon:"马上",template:"{num}{unit}{suffix}"},en:{year:"year",month:"month",day:"day",hour:"hour",minute:"minute",second:"second",ago:"ago",later:"later",justNow:"just now",soon:"soon",template:"{num} {unit} {suffix}"}},t=u[s]||u.zh;let c=w(e),a=c.getTime()-Date.now(),d=Math.abs(a);if(d<l[0])return a<0?t.justNow:t.soon;if(d>=l[1])return D(c,i);let n,r,M=t.later;a<0&&(M=t.ago,a=-a);const g=Math.floor(a/1e3),f=Math.floor(g/60),h=Math.floor(f/60),y=Math.floor(h/24),m=Math.floor(y/30),p=Math.floor(m/12);switch(!0){case p>0:n=p,r=t.year;break;case m>0:n=m,r=t.month;break;case y>0:n=y,r=t.day;break;case h>0:n=h,r=t.hour;break;case f>0:n=f,r=t.minute;break;default:n=g,r=t.second;break}return s==="en"&&(n===1?n="a":r+="s"),t.template.replace(/{\s*num\s*}/g,n+"").replace(/{\s*unit\s*}/g,r).replace(/{\s*suffix\s*}/g,M)}exports.friendlyDate=b;
