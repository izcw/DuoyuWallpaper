"use strict";const t=require("../../../../common/vendor.js"),m=require("../../../uv-ui-tools/libs/mixin/mpMixin.js"),_=require("../../../uv-ui-tools/libs/mixin/mixin.js");require("../../../uv-ui-tools/libs/function/index.js");require("../../../uv-ui-tools/libs/function/test.js");require("../../../uv-ui-tools/libs/function/digit.js");require("../../../uv-ui-tools/libs/util/route.js");require("../../../uv-ui-tools/libs/function/debounce.js");require("../../../uv-ui-tools/libs/function/throttle.js");var h,p;const g={name:"uv-skeletons",mixins:[m.mpMixin,_.mixin],props:{loading:{type:Boolean,default:!0},skeleton:{type:Array,default:()=>[]},animate:{type:Boolean,default:!0},round:{type:Boolean,default:!1},...(p=(h=t.index.$uv)==null?void 0:h.props)==null?void 0:p.skeleton},data(){return{elements:[],opacity:.5,duration:600}},computed:{animateClass(){return this.animate?"uv-skeleton--animation":"uv-skeleton--static"},roundClass(){return this.round?"uv-skeleton--round":"uv-skeleton--radius"},style(e){return a=>{const u={};return this.$uv.deepMerge(u,this.$uv.addStyle(a.style))}}},created(){this.init()},methods:{init(){let e=[];if(!this.$uv.test.array(this.skeleton))return this.$uv.error("skeleton参数必须为数组形式，参考文档示例：");this.skeleton.forEach(a=>{const u=this.getElCounts(a);e=e.concat(u)}),this.elements=[...e]},getElCounts(e){let a=[],u=[];if(this.$uv.test.number(e))return a.push({type:"gap",height:e}),a;{const i=e.type?e.type:"line",d=e.num?e.num:1,r=e.style?e.style:{},n=this.$uv.test.array(r),l=e.gap?e.gap:"20rpx",o=e.children?e.children:[];for(let s=0;s<o.length;s++)u[s]={clas:o[s].type.indexOf("avatar")>-1||o[s].type.indexOf("custom")>-1?"":"uv-skeleton__group__sub",elements:this.getElCounts(o[s])};for(let s=0;s<d;s++)l&&s<d&&s>0&&a.push({type:"gap",height:l}),a.push({clas:`uv-skeleton__${i}`,type:i,style:n?r[s]:r,gap:l,children:u});return a}},createAnimation(e=1){if(!this.loading||!this.animate)return;let a=0;const u=this.$refs.skeleton;u.forEach(i=>{animation.transition(i,{styles:{opacity:e},duration:this.duration},()=>{a++,a>=u.length&&setTimeout(()=>{this.createAnimation(e<1?1:this.opacity)},200)})})}}};function v(e,a,u,i,d,r){return t.e({a:u.loading},u.loading?{b:t.f(d.elements,(n,l,o)=>t.e({a:n.type=="flex"},n.type=="flex"?{b:t.f(n.children,(s,y,x)=>({a:t.f(s.elements,(c,f,C)=>t.e({a:c.type=="gap"},c.type=="gap"?{b:e.$uv.addUnit(c.height,"rpx")}:{c:t.n(c.clas),d:t.n(r.roundClass),e:t.n(r.animateClass),f:t.s(r.style(c))},{g:f})),b:t.n(s.clas),c:t.s(r.style(s)),d:y})),c:t.s(r.style(n))}:n.type=="custom"?{e:t.n(n.clas),f:t.n(r.animateClass),g:t.s(r.style(n))}:n.type=="gap"?{i:e.$uv.addUnit(n.height,"rpx")}:{j:t.n(n.clas),k:t.n(r.roundClass),l:t.n(r.animateClass),m:t.s(r.style(n))},{d:n.type=="custom",h:n.type=="gap",n:l}))}:{})}const k=t._export_sfc(g,[["render",v],["__scopeId","data-v-cf66e016"],["__file","/Users/izcw/Desktop/我的项目/DuoyuWallpaper/uni_modules/uv-skeletons/components/uv-skeletons/uv-skeletons.vue"]]);tt.createComponent(k);
